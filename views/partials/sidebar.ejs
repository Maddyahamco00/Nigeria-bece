<!-- views/partials/sidebar.ejs -->
<aside class="modern-sidebar">
  <div class="sidebar-header">
    <img src="/images/logos/bece-logo.svg" alt="BECE Logo" class="sidebar-logo">
    <div class="sidebar-brand">
      <h5 class="sidebar-title">BECE Portal</h5>
      <span class="sidebar-subtitle">
        <% if (typeof user !== 'undefined' && user) { %>
          <% if (user.role === 'super_admin') { %>Super Admin<% } else { %>Admin Panel<% } %>
        <% } else if (typeof student !== 'undefined' && student) { %>
          Student Portal
        <% } else { %>
          Dashboard
        <% } %>
      </span>
    </div>
  </div>
  
  <% if (typeof user !== 'undefined' && user && user.role) { %>
  <div class="role-badge">
    <span class="badge bg-primary">
      <i class="fas fa-user-shield me-1"></i>
      <%= user.role.replace('_', ' ').toUpperCase() %>
    </span>
  </div>
  <% } %>

  <nav class="sidebar-nav">
    <% if (typeof user !== 'undefined' && user) { %>
      <!-- Admin Sidebar -->
      <ul class="nav flex-column">
        <li class="nav-item">
          <a href="/admin/dashboard" class="nav-link <%= currentPath && currentPath.startsWith('/admin/dashboard') ? 'active' : '' %>">
            <i class="fas fa-tachometer-alt me-2"></i>
            <span>Dashboard</span>
          </a>
        </li>
        <% if (user && user.role === 'super_admin') { %>
        <li class="nav-item">
          <a href="/admin/users/new" class="nav-link <%= currentPath && currentPath.startsWith('/admin/users/new') ? 'active' : '' %>">
            <i class="fas fa-user-plus me-2"></i>
            <span>Add Sub-Admin</span>
          </a>
        </li>
        <% } %>
        <li class="nav-item">
          <a href="/admin/students" class="nav-link <%= currentPath && currentPath.startsWith('/admin/students') ? 'active' : '' %>">
            <i class="fas fa-users me-2"></i>
            <span>Students</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="/admin/schools" class="nav-link <%= currentPath && currentPath.startsWith('/admin/schools') ? 'active' : '' %>">
            <i class="fas fa-school me-2"></i>
            <span>Schools</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="/admin/subjects" class="nav-link <%= currentPath && currentPath.startsWith('/admin/subjects') ? 'active' : '' %>">
            <i class="fas fa-book me-2"></i>
            <span>Subjects</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="/admin/results" class="nav-link <%= currentPath && currentPath.startsWith('/admin/results') ? 'active' : '' %>">
            <i class="fas fa-chart-bar me-2"></i>
            <span>Results</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="/admin/payments" class="nav-link <%= currentPath && currentPath.startsWith('/admin/payments') ? 'active' : '' %>">
            <i class="fas fa-credit-card me-2"></i>
            <span>Payments</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="/admin/timetable" class="nav-link <%= currentPath && currentPath.startsWith('/admin/timetable') ? 'active' : '' %>">
            <i class="fas fa-calendar-alt me-2"></i>
            <span>Timetable</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="/admin/centers" class="nav-link <%= currentPath && currentPath.startsWith('/admin/centers') ? 'active' : '' %>">
            <i class="fas fa-map-marker-alt me-2"></i>
            <span>Exam Centers</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="/admin/certificates" class="nav-link <%= currentPath && currentPath.startsWith('/admin/certificates') ? 'active' : '' %>">
            <i class="fas fa-certificate me-2"></i>
            <span>Certificates</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="/admin/gazette" class="nav-link <%= currentPath && currentPath.startsWith('/admin/gazette') ? 'active' : '' %>">
            <i class="fas fa-newspaper me-2"></i>
            <span>Gazette</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="/admin/analytics" class="nav-link <%= currentPath && currentPath.startsWith('/admin/analytics') ? 'active' : '' %>">
            <i class="fas fa-chart-line me-2"></i>
            <span>Analytics</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="/admin/settings" class="nav-link <%= currentPath && currentPath.startsWith('/admin/settings') ? 'active' : '' %>">
            <i class="fas fa-cog me-2"></i>
            <span>Settings</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="/auth/logout" class="nav-link text-danger">
            <i class="fas fa-sign-out-alt me-2"></i>
            <span>Logout</span>
          </a>
        </li>
      </ul>
    <% } else if (typeof student !== 'undefined' && student) { %>
      <!-- Student Sidebar -->
      <ul class="nav flex-column">
        <li class="nav-item">
          <a href="/students/dashboard" class="nav-link <%= currentPath && currentPath.startsWith('/students/dashboard') ? 'active' : '' %>">
            <i class="fas fa-tachometer-alt me-2"></i>
            <span>Dashboard</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="/students/profile" class="nav-link <%= currentPath && currentPath.startsWith('/students/profile') ? 'active' : '' %>">
            <i class="fas fa-user me-2"></i>
            <span>My Profile</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="/students/results" class="nav-link <%= currentPath && currentPath.startsWith('/students/results') ? 'active' : '' %>">
            <i class="fas fa-chart-bar me-2"></i>
            <span>My Results</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="/students/payments" class="nav-link <%= currentPath && currentPath.startsWith('/students/payments') ? 'active' : '' %>">
            <i class="fas fa-credit-card me-2"></i>
            <span>My Payments</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="/auth/logout" class="nav-link text-danger">
            <i class="fas fa-sign-out-alt me-2"></i>
            <span>Logout</span>
          </a>
        </li>
      </ul>
    <% } %>
  </nav>

  <div class="sidebar-footer">
    <div class="user-info">
      <% if (typeof user !== 'undefined' && user) { %>
        <div class="user-avatar">
          <i class="fas fa-user-shield"></i>
        </div>
        <div class="user-details">
          <div class="user-name"><%= user && user.name ? user.name : 'Admin User' %></div>
          <div class="user-role"><%= user && user.role ? user.role.replace('_', ' ').toUpperCase() : 'ADMIN' %></div>
        </div>
      <% } else if (typeof student !== 'undefined' && student) { %>
        <div class="user-avatar">
          <i class="fas fa-user-graduate"></i>
        </div>
        <div class="user-details">
          <div class="user-name"><%= student && student.name ? student.name : 'Student' %></div>
          <div class="user-role">STUDENT</div>
        </div>
      <% } %>
    </div>
  </div>
</aside>

<style>
.modern-sidebar {
  width: 280px;
  height: 100vh;
  background: linear-gradient(180deg, #2c3e50 0%, #34495e 100%);
  color: white;
  position: fixed;
  left: 0;
  top: 0;
  z-index: 1000;
  display: flex;
  flex-direction: column;
  box-shadow: 2px 0 20px rgba(0,0,0,0.1);
  transition: all 0.3s ease;
}

.sidebar-header {
  padding: 30px 25px;
  border-bottom: 1px solid rgba(255,255,255,0.1);
  display: flex;
  align-items: center;
  gap: 15px;
}

.sidebar-logo {
  width: 50px;
  height: 50px;
  filter: drop-shadow(0 2px 8px rgba(0,0,0,0.3));
}

.sidebar-brand {
  flex: 1;
}

.sidebar-title {
  font-size: 1.3rem;
  font-weight: 700;
  margin: 0;
  color: white;
}

.sidebar-subtitle {
  font-size: 0.85rem;
  color: rgba(255,255,255,0.7);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.sidebar-nav {
  flex: 1;
  padding: 20px 0;
  overflow-y: auto;
}

.sidebar-nav .nav {
  padding: 0 15px;
}

.sidebar-nav .nav-item {
  margin-bottom: 5px;
}

.sidebar-nav .nav-link {
  display: flex;
  align-items: center;
  padding: 15px 20px;
  color: rgba(255,255,255,0.8);
  text-decoration: none;
  border-radius: 12px;
  margin: 0 5px;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.sidebar-nav .nav-link::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
  transition: left 0.5s;
}

.sidebar-nav .nav-link:hover::before {
  left: 100%;
}

.sidebar-nav .nav-link:hover,
.sidebar-nav .nav-link.active {
  background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
  color: white;
  transform: translateX(5px);
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

.sidebar-nav .nav-link i {
  width: 20px;
  text-align: center;
  font-size: 1.1rem;
}

.sidebar-nav .nav-link span {
  font-weight: 500;
  font-size: 0.95rem;
}

.sidebar-footer {
  padding: 25px;
  border-top: 1px solid rgba(255,255,255,0.1);
  background: rgba(0,0,0,0.2);
}

.user-info {
  display: flex;
  align-items: center;
  gap: 15px;
}

.user-avatar {
  width: 45px;
  height: 45px;
  background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  color: white;
}

.user-details {
  flex: 1;
}

.user-name {
  font-weight: 600;
  font-size: 0.95rem;
  color: white;
  margin-bottom: 2px;
}

.user-role {
  font-size: 0.75rem;
  color: rgba(255,255,255,0.6);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .modern-sidebar {
    transform: translateX(-100%);
    width: 100%;
    max-width: 280px;
  }
  
  .modern-sidebar.open {
    transform: translateX(0);
  }
}

/* Custom Scrollbar */
.sidebar-nav::-webkit-scrollbar {
  width: 4px;
}

.sidebar-nav::-webkit-scrollbar-track {
  background: rgba(255,255,255,0.1);
}

.sidebar-nav::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,0.3);
  border-radius: 2px;
}

.sidebar-nav::-webkit-scrollbar-thumb:hover {
  background: rgba(255,255,255,0.5);
}

.role-badge {
  padding: 15px 25px 0;
  text-align: center;
}

.role-badge .badge {
  font-size: 0.75rem;
  padding: 8px 12px;
  border-radius: 20px;
  font-weight: 600;
  letter-spacing: 0.5px;
}
</style>